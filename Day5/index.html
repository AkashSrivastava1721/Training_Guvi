<!DOCTYPE html>
<html>
    <style>
        h1
        {
            text-align: center;
            color: red;
        };
    </style>
    <title>
            JS Task
    </title>
    <head>
        <h1> Country Weather Dashboard</h1>
    </head>
    <body >
        <script>
            var data;
            fetch('https://raw.githubusercontent.com/rvsp/restcountries-json-data/master/res-countries.json')
            .then(response => response.json())
            .then(data => {//console.log(data);  
                return data;})
            .then(cdata => 
                {
                    for(var i=0;i<250;i++)
                    {
                        var name= cdata[i].name;
                        var img = document.createElement("img");
                        img.src = cdata[i].flag;
                        img.width = 100;
                        img.height = 80;
                        var cap= cdata[i].capital;
                        var reg= cdata[i].region;
                        var code = cdata[i].alpha2Code;
                        var d = display(name,cap,code,reg,img);
                    }
                    function display(name,cap,code,reg,img)
                    {
                        var div = document.createElement("div");
                        var text0 = document.createElement("p");
                        var text = document.createElement("p");
                        var text1 = document.createElement("p");
                        var text2 = document.createElement("p");
                        var text3 = document.createElement("p");
                        var text5 = document.createElement("p");
                        text0.innerText = "Country Number: "+parseInt(i+1);
                        text.innerText = "Country Name: "+name;
                        text1.innerText = "Capital: "+cap;
                        text2.innerText= "Country Code: "+code;
                        text3.innerText= "Region: "+reg;
                        text5.innerText= "------------------------------------------------------------------";
                        div.setAttribute("card","");
                        div.appendChild(img);
                        document.body.appendChild(text0);
                        document.body.appendChild(div);
                        document.body.appendChild(text);
                        document.body.appendChild(text1);
                        document.body.appendChild(text2);
                        document.body.appendChild(text3);
                        var button = document.createElement("button");
                        button.innerHTML = "Temperature";
                        var body = document.getElementsByTagName("body")[0];
                        body.appendChild(button);
                        button.addEventListener ("click", function() {
                            display1(cap);
                        });
                        document.body.appendChild(text5);
                    }
                }
            ); 
            function display1(capital)
                    {
                        fetch('https://api.weatherbit.io/v2.0/current?&city='+capital+'&key=1a12707a432e4da39fb7f2bfcb2f3ffe&include=minutely')
                        .then(response1 => response1.json())
                        .then(data1 => {console.log(data1); 
                            return data1;})
                        .then(c1data =>
                        {
                            var info = c1data.data[0].temp;
                            alert(info+"  .degree celcius");
                        }
                        );
                    }
        </script> 
        
    </body>
</html>